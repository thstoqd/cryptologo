# 排名更新问题排查

## 🔍 问题分析

**现象**: CoinMarketCap 上 ZEC 排名是 14，但网站上显示的还是旧的排名（17）

**原因**:
1. 数据文件 `icons-metadata.json` 中的排名没有更新
2. `lastUpdated` 还是 `2024-01-15`，说明数据文件确实没有更新
3. 网站是静态导出的，即使数据更新了，也需要重新构建才能看到

## 🔧 解决方案

### 方案 1: 检查 GitHub Actions 是否真的更新了排名

1. **进入 GitHub Actions 页面**
   - 查看 Run #17（手动触发的成功运行）的日志
   - 检查是否有 "更新 Zcash (ZEC): 17 → 14" 的日志

2. **如果日志显示没有更新**
   - 可能是 CoinMarketCap API 返回的排名还是 17
   - 或者更新脚本有问题

3. **如果日志显示更新了，但数据文件没变**
   - 可能是提交失败
   - 检查是否有新的提交记录

### 方案 2: 手动触发更新（推荐）

如果 GitHub Actions 没有更新，可以手动触发：

```bash
# 设置 API Key
$env:COINMARKETCAP_API_KEY="你的API_KEY"

# 运行更新脚本
node scripts/update-ranks.js
```

然后提交更改：
```bash
git add data/icons-metadata.json
git commit -m "chore: 更新代币排名"
git push
```

### 方案 3: 确保 Cloudflare Pages 重新部署

即使数据更新了，网站也需要重新构建：

1. **检查 Cloudflare Pages 部署**
   - 进入 Cloudflare Pages 控制台
   - 查看是否有新的部署记录
   - 如果没有，手动触发重新部署

2. **手动触发部署**
   - 在 Cloudflare Pages 中点击 "Retry deployment"
   - 或者推送一个空提交来触发部署

## 📋 检查清单

- [ ] 检查 GitHub Actions 运行日志，确认是否更新了排名
- [ ] 检查数据文件中的 `lastUpdated` 是否更新
- [ ] 检查是否有新的提交记录
- [ ] 检查 Cloudflare Pages 是否有新的部署
- [ ] 如果都没有，手动触发更新和部署

## 🚀 快速修复步骤

1. **手动触发 GitHub Actions**
   - 进入 Actions 页面
   - 点击 "Run workflow" 再次运行

2. **检查运行日志**
   - 查看是否更新了 ZEC 的排名
   - 查看是否有提交记录

3. **如果更新了，等待 Cloudflare Pages 自动部署**
   - 通常会在几分钟内自动部署
   - 如果没有，手动触发部署

4. **验证更新**
   - 等待部署完成后
   - 刷新网站，检查 ZEC 的排名是否更新

